(this.webpackJsonpmessenger=this.webpackJsonpmessenger||[]).push([[0],{61:function(e,n,t){"use strict";t.r(n);t(43),t(45);var r,c,i,o,a,s,d,u,j,l,b,h=t(6),O=t.n(h),m=t(1),g=t.n(m),p=t(26),x=t.n(p),f=t(27),v=t(7),y=function(){var e=new O.a.auth.GoogleAuthProvider;return O.a.auth().signInWithRedirect(e).then((function(e){console.log("logged in as ".concat(e.user.displayName))})).catch((function(e){console.error("could not sign in",e)}))},w=t(11),k=function(e){var n=e.children,t=Object(m.useState)(null),r=Object(w.a)(t,2),c=r[0],i=r[1],o=Object(m.useState)(null),a=Object(w.a)(o,2),s=a[0],d=a[1],u=Object(m.useState)(!0),j=Object(w.a)(u,2),l=j[0],b=j[1];return Object(m.useEffect)((function(){return O.a.auth().onAuthStateChanged((function(e){d(e),b(!1)}),(function(e){i(e),b(!1)}))}),[]),n({auth:s,error:c,loading:l})},E=t(2),S=function(e){var n=e.error;return Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"Whoops"}),Object(E.jsx)("p",{children:"Sorry, something went wrong. We're looking into it."}),Object(E.jsx)("div",{style:{fontFamily:"monospace"},children:n?n.message:null}),Object(E.jsx)("a",{href:"/",children:"Go to the homepage"})]})},C=t(33),z=t(34),A=t(41),D=t(40),I=function(e){Object(A.a)(t,e);var n=Object(D.a)(t);function t(){var e;Object(C.a)(this,t);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=n.call.apply(n,[this].concat(c))).state={error:null},e}return Object(z.a)(t,[{key:"componentDidCatch",value:function(e,n){this.setState({error:e})}},{key:"render",value:function(){return this.state.error?Object(E.jsx)(S,{error:this.state.error}):this.props.children}}]),t}(g.a.Component),L=t(8),R=t(9),T=R.b.div(r||(r=Object(L.a)(["\n  max-width: 500px;\n  margin: 0 auto;\n  display: grid;\n  grid-template-rows: max-content auto max-content;\n  min-height: 100vh;\n"]))),W=R.b.div(c||(c=Object(L.a)(["\n  padding: 2rem 1rem 1rem;\n"]))),M=(R.b.div(i||(i=Object(L.a)(["\n  padding: 1rem;\n"]))),R.b.div(o||(o=Object(L.a)(["\n  padding: 1rem;\n  text-align: center;\n  opacity: .3;\n"])))),N="hsl(220, 20%, 20%)",F="hsl(220, 80%, 60%)",B=Object(R.a)(a||(a=Object(L.a)(["\n  *:before,\n  *:after,\n  * {\n    box-sizing: border-box;\n    font-family: sans-serif;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n  }\n\n  html,\n  body {\n    margin: 0;\n    padding: 0;\n    line-height: 1.4;\n  }\n\n  html,\n  body,\n  #root {\n    min-height: 100vh;\n  }\n\n  p {\n    margin: 0 0 1rem;\n  }\n\n  hr {\n    border: none;\n    height: 1px;\n    background: #eee;\n    margin: 1rem 0;\n  }\n"]))),G=(R.b.div(s||(s=Object(L.a)(["\n  display: block;\n  margin: 0 0 1rem;\n"]))),R.b.label(d||(d=Object(L.a)(["\n  display: block;\n  margin: 0 0 0.33rem;\n"]))),R.b.input(u||(u=Object(L.a)(["\n  padding: 0.5rem;\n  border-radius: 3px;\n  font-size: 16px;\n  border: 1px solid #ddd;\n  margin: 0 0 1rem;\n"]))),R.b.textarea(j||(j=Object(L.a)(["\n  padding: 0.5rem;\n  border-radius: 3px;\n  font-size: 16px;\n  border: 1px solid #ddd;\n  margin: 0 0 1rem;\n"]))),Object(R.b)(v.b)(l||(l=Object(L.a)(["\n  color: ",";\n  text-decoration: none;\n\n  &:hover,\n  &:active {\n    text-decoration: underline;\n  }\n"])),F),Object(R.b)(v.b)(b||(b=Object(L.a)(["\n  color: ",";\n  text-decoration: none;\n  font-size: 1.2rem;\n"])),N)),J=function(e){var n=e.children;return Object(E.jsxs)(T,{children:[Object(E.jsxs)(W,{children:[Object(E.jsx)(G,{to:"/",children:"Messenger"}),Object(E.jsxs)("div",{style:{float:"right"},children:[Object(E.jsx)(G,{to:"/search",children:Object(E.jsx)("span",{role:"img","aria-label":"search",children:"\ud83d\udd0e"})})," ",Object(E.jsx)(k,{children:function(e){var n=e.isLoading,t=e.error,r=e.auth;return n?"...":t?"\u26a0\ufe0f login error":r?Object(E.jsx)(G,{to:"/account",children:Object(E.jsx)("span",{role:"img","aria-label":"account",children:"\ud83d\udc64"})}):Object(E.jsx)("button",{onClick:y,children:"log in"})}})]})]}),n,Object(E.jsxs)(M,{children:["\xa9 ",(new Date).getFullYear()]})]})},K=t(20),P=t.n(K),U=t(42),q=t(38),H=t(39),Y=t.n(H),Q=function(){return O.a.firestore().collection("rooms")},V={get:function(){var e=Object(q.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q().get().then((function(e){return e.docs.map((function(e){return Object(U.a)({id:e.id},e.data())}))})).catch((function(e){return console.error("Error adding document: ",e),[]})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(e){var n,t=e.name;return Q().add({name:t,slug:Y()(t,{lower:!0}),createdAt:O.a.firestore.Timestamp.now(),createdBy:(null===(n=O.a.auth().currentUser)||void 0===n?void 0:n.uid)||null}).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){console.error("Error adding document: ",e)}))},remove:function(e){var n=e.id;return Q().doc(n).delete().catch((function(e){alert("Whoops, couldn't delete the post: ".concat(e.message))}))}},X=function(e){var n=e.auth,t=Object(m.useState)(""),r=Object(w.a)(t,2),c=r[0],i=r[1],o=Object(m.useState)([]),a=Object(w.a)(o,2),s=a[0],d=a[1];return Object(m.useEffect)((function(){V.get().then(d)}),[]),Object(E.jsx)(v.c,{render:function(e){e.history;return Object(E.jsxs)("div",{children:[Object(E.jsx)("img",{src:n.photoURL,alt:n.displayName,width:"100",height:"100"}),Object(E.jsx)("p",{children:Object(E.jsx)("strong",{children:n.displayName})}),Object(E.jsx)("p",{children:n.email}),"+++",s.map((function(e){return Object(E.jsxs)("section",{children:[Object(E.jsx)("p",{children:e.name}),Object(E.jsxs)("button",{onClick:function(){return V.remove(e)},children:["DELETE ",e.name," ROOM"]})]})})),Object(E.jsx)("input",{onChange:function(e){return i(e.target.value)},value:c}),Object(E.jsx)("button",{onClick:function(){return V.add({name:"Test"})},children:"CREATE ROOM"})]})}})},Z=Object(v.e)((function(e){var n=e.history;return Object(m.useEffect)((function(){var e=n.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[n]),null})),$=function(){return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(k,{children:function(e){var n=e.isLoading,t=e.error,r=e.auth;return n?Object(E.jsx)("p",{children:"loading..."}):t?Object(E.jsx)(S,{error:t}):r?Object(E.jsxs)("div",{children:[Object(E.jsx)(X,{auth:r}),Object(E.jsx)("hr",{})]}):Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{children:"Log in to see your account"}),Object(E.jsx)("button",{onClick:y,children:"Log in"})]})}})})},_=function(){return Object(E.jsxs)(v.d,{children:[Object(E.jsx)(v.c,{path:"/",component:$}),Object(E.jsx)(v.c,{component:S})]})},ee=function(){return Object(E.jsx)(I,{children:Object(E.jsx)(f.a,{firebase:O.a,children:Object(E.jsx)(v.a,{children:Object(E.jsxs)(J,{children:[Object(E.jsx)(Z,{}),Object(E.jsx)(B,{}),Object(E.jsx)(_,{})]})})})})};O.a.initializeApp({apiKey:"AIzaSyDIKt9qeTEzN7MjhIu-WSmSiPeH4vbRei4",authDomain:"messenger-2000.firebaseapp.com",projectId:"messenger-2000"}),x.a.render(Object(E.jsx)(ee,{}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.238fbda6.chunk.js.map