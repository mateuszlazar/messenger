{"version":3,"sources":["actions/logIn.js","components/Auth/FirebaseAuth.tsx","components/Error/Error.tsx","components/Error/ErrorBoundary.tsx","components/Layout/styled.ts","app/styled/theme.ts","app/styled/index.ts","components/Layout/Layout.tsx","services/rooms/index.ts","components/Profile/Profile.tsx","components/ScrollToTop/ScrollToTop.tsx","pages/Home/Home.tsx","app/router.tsx","app/index.tsx","index.tsx"],"names":["logIn","provider","Firebase","auth","GoogleAuthProvider","signInWithRedirect","then","result","console","log","user","displayName","catch","error","FirebaseAuth","children","useState","setError","setAuth","loading","setLoading","useEffect","onAuthStateChanged","Error","style","fontFamily","message","href","ErrorBoundary","state","info","this","setState","props","React","Component","HeaderFooterWrapper","styled","div","Header","Footer","colors","GlobalStyles","createGlobalStyle","HeaderLink","label","input","textarea","Link","Layout","to","float","role","aria-label","isLoading","onClick","Date","getFullYear","RoomsCollection","firestore","collection","RoomsService","get","a","snapshot","docs","map","doc","id","data","add","name","slug","slugify","lower","createdAt","Timestamp","now","createdBy","currentUser","uid","docRef","remove","delete","alert","Profile","newRoomName","setNewRoomName","rooms","setRooms","render","history","src","photoURL","alt","width","height","email","room","onChange","e","target","value","withRouter","unlisten","listen","window","scrollTo","Home","Router","path","component","App","firebase","initializeApp","apiKey","process","authDomain","projectId","ReactDOM","document","getElementById"],"mappings":"oNAceA,EAZD,WACZ,IAAIC,EAAW,IAAIC,IAASC,KAAKC,mBAEjC,OAAOF,IAASC,OACbE,mBAAmBJ,GACnBK,MAAM,SAAAC,GACLC,QAAQC,IAAR,uBAA4BF,EAAOG,KAAKC,iBACvCC,OAAO,SAAAC,GACRL,QAAQK,MAAM,oBAAqBA,O,QCL5BC,EAA6C,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EAChDC,mBAAc,MADkC,mBACnEH,EADmE,KAC5DI,EAD4D,OAElDD,mBAAc,MAFoC,mBAEnEb,EAFmE,KAE7De,EAF6D,OAG5CF,oBAAkB,GAH0B,mBAGnEG,EAHmE,KAG1DC,EAH0D,KAoB1E,OAfAC,qBACE,kBACEnB,IAASC,OAAOmB,oBACd,SAACnB,GACCe,EAAQf,GACRiB,GAAW,MAEb,SAACP,GACCI,EAASJ,GACTO,GAAW,QAGjB,IAGKL,EAAS,CAAEZ,OAAMU,QAAOM,a,OCvBpBI,EAAQ,SAAC,GAAD,IAAGV,EAAH,EAAGA,MAAH,OACnB,gCACE,wCACA,oFACA,qBAAKW,MAAO,CAAEC,WAAY,aAA1B,SACGZ,EAAQA,EAAMa,QAAU,OAE3B,mBAAGC,KAAK,IAAR,oC,gCCNSC,EAAb,4MACEC,MAAQ,CACNhB,MAAO,MAFX,uDAKE,SAAkBA,EAAYiB,GAC5BC,KAAKC,SAAS,CAAEnB,YANpB,oBASE,WACE,OAAIkB,KAAKF,MAAMhB,MACN,cAAC,EAAD,CAAOA,MAAOkB,KAAKF,MAAMhB,QAG3BkB,KAAKE,MAAMlB,aAdtB,GAAmCmB,IAAMC,W,cCDnCC,EAAsBC,IAAOC,IAAV,iKAOnBC,EAASF,IAAOC,IAAV,wDAMNE,GAHOH,IAAOC,IAAV,8CAGKD,IAAOC,IAAV,sFCbCG,EACJ,qBADIA,EAGL,qBCAKC,EAAeC,YAAH,gcAkEnBC,GAhCUP,IAAOC,IAAV,oEAIKD,IAAOQ,MAAV,uEAIGR,IAAOS,MAAV,2IAOET,IAAOU,SAAV,2IAQOV,YAAOW,IAAPX,CAAH,sIACPI,GAQQJ,YAAOW,IAAPX,CAAH,0FACLI,IC9DEQ,EAAmB,SAAC,GAAD,IAAGlC,EAAH,EAAGA,SAAH,OAC9B,eAACqB,EAAD,WACE,eAACG,EAAD,WACE,cAACK,EAAD,CAAYM,GAAG,IAAf,uBAEA,sBAAK1B,MAAO,CAAE2B,MAAO,SAArB,UACE,cAACP,EAAD,CAAYM,GAAG,UAAf,SACE,sBAAME,KAAK,MAAMC,aAAW,SAA5B,4BAGY,IACd,cAAC,EAAD,UACG,YAAiC,IAA9BC,EAA6B,EAA7BA,UAAWzC,EAAkB,EAAlBA,MAAOV,EAAW,EAAXA,KACpB,OAAImD,EACK,MAELzC,EACK,2BAELV,EAEA,cAACyC,EAAD,CAAYM,GAAE,WAAd,SACE,sBAAME,KAAK,MAAMC,aAAW,UAA5B,4BAMG,wBAAQE,QAASvD,EAAjB,6BAOhBe,EAED,eAACyB,EAAD,oBAAW,IAAIgB,MAAOC,qB,kDC1CpBC,EAAkB,kBAAMxD,IAASyD,YAAYC,WAAW,UAoCjDC,EAAe,CAAEC,IAlCrB,uCAAG,sBAAAC,EAAA,+EACVL,IACGI,MACAxD,MAAK,SAAC0D,GACL,OAAOA,EAASC,KAAKC,KAAI,SAACC,GAAD,oBAAYC,GAAID,EAAIC,IAAOD,EAAIE,cAEzDzD,OAAM,SAACC,GAEN,OADAL,QAAQK,MAAM,0BAA2BA,GAClC,OARD,2CAAH,qDAkC0ByD,IAvBvB,SAAC,GAAD,MAAGC,EAAH,EAAGA,KAAH,OACVb,IACGY,IAAI,CACHC,OACAC,KAAMC,IAAQF,EAAM,CAAEG,OAAO,IAC7BC,UAAWzE,IAASyD,UAAUiB,UAAUC,MACxCC,WAAW,UAAA5E,IAASC,OAAO4E,mBAAhB,eAA6BC,MAAO,OAEhD1E,MAAK,SAAC2E,GACLzE,QAAQC,IAAI,6BAA8BwE,EAAOb,OAElDxD,OAAM,SAACC,GACNL,QAAQK,MAAM,0BAA2BA,OAWPqE,OARzB,SAAC,GAAD,IAAGd,EAAH,EAAGA,GAAH,OACbV,IACGS,IAAIC,GACJe,SACAvE,OAAM,SAACC,GACNuE,MAAM,qCAAD,OAAsCvE,EAAMa,eChC1C2D,EAAyB,SAAC,GAAc,IAAZlF,EAAW,EAAXA,KAAW,EACZa,mBAAiB,IADL,mBAC3CsE,EAD2C,KAC9BC,EAD8B,OAExBvE,mBAAkB,IAFM,mBAE3CwE,EAF2C,KAEpCC,EAFoC,KASlD,OALApE,qBAAU,WAERwC,EAAaC,MAAMxD,KAAKmF,KACvB,IAGD,cAAC,IAAD,CACEC,OAAQ,cAAGC,QAAH,OACN,gCACE,qBACEC,IAAKzF,EAAK0F,SACVC,IAAK3F,EAAKQ,YACVoF,MAAM,MACNC,OAAO,QAET,4BACE,iCAAS7F,EAAKQ,gBAEhB,4BAAIR,EAAK8F,QAVX,MAYGT,EAAMtB,KAAI,SAACgC,GAAD,OACT,oCACE,4BAAIA,EAAK3B,OACT,yBAAQhB,QAAS,kBAAMM,EAAaqB,OAAOgB,IAA3C,oBACUA,EAAK3B,KADf,iBAKJ,uBACE4B,SAAU,SAACC,GAAD,OAAOb,EAAea,EAAEC,OAAOC,QACzCA,MAAOhB,IAET,wBAAQ/B,QAAS,kBAAMM,EAAaS,IAAI,CAAEC,KAAM,UAAhD,gCC1BKgC,eAb2C,SAAC,GAAiB,IAAfZ,EAAc,EAAdA,QAU3D,OATAtE,qBAAU,WACR,IAAMmF,EAAWb,EAAQc,QAAO,WAC9BC,OAAOC,SAAS,EAAG,MAErB,OAAO,WACLH,OAED,CAACb,IAEG,QCRIiB,EAAO,kBAClB,mCACE,cAAC,EAAD,UACG,YAAiC,IAA9BtD,EAA6B,EAA7BA,UAAWzC,EAAkB,EAAlBA,MAAOV,EAAW,EAAXA,KACpB,OAAImD,EACK,2CAGLzC,EACK,cAAC,EAAD,CAAOA,MAAOA,IAGlBV,EAUH,gCACE,cAAC,EAAD,CAASA,KAAMA,IACf,0BAVA,gCACE,2DACA,wBAAQoD,QAASvD,EAAjB,6BChBD6G,EAAS,kBACpB,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,IAAIC,UAAWH,IAE3B,cAAC,IAAD,CAAOG,UAAWxF,QCcPyF,GAdH,kBACV,cAAC,EAAD,UACE,cAAC,IAAD,CAAmBC,SAAU/G,IAA7B,SACE,cAAC,IAAD,UACE,eAAC,EAAD,WACE,cAAC,EAAD,IACA,cAACwC,EAAD,IACA,cAAC,EAAD,cCRVxC,IAASgH,cAAc,CACrBC,OAAQC,0CACRC,WAAYD,iCACZE,UAAWF,mBAGbG,IAAS7B,OAAO,cAAC,GAAD,IAAS8B,SAASC,eAAe,W","file":"static/js/main.238fbda6.chunk.js","sourcesContent":["import Firebase from 'firebase/app'\n\nconst logIn = () => {\n  let provider = new Firebase.auth.GoogleAuthProvider()\n  \n  return Firebase.auth()\n    .signInWithRedirect(provider)\n    .then( result => {\n      console.log(`logged in as ${result.user.displayName}`)\n    }).catch( error => {\n      console.error('could not sign in', error)\n    })\n}\n\nexport default logIn\n","import React, { useEffect, useState } from \"react\";\nimport Firebase from \"firebase/app\";\nimport { IFirebaseAuthProps } from \"./IFirebaseAuth\";\n\n// @ts-ignore : @todo\nexport const FirebaseAuth: React.FC<IFirebaseAuthProps> = ({ children }) => {\n  const [error, setError] = useState<any>(null);\n  const [auth, setAuth] = useState<any>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(\n    () =>\n      Firebase.auth().onAuthStateChanged(\n        (auth: any) => {\n          setAuth(auth);\n          setLoading(false);\n        },\n        (error: any) => {\n          setError(error);\n          setLoading(false);\n        }\n      ),\n    []\n  );\n\n  return children({ auth, error, loading });\n};\n","import React from \"react\";\n\nexport const Error = ({ error }: any) => (\n  <div>\n    <h1>Whoops</h1>\n    <p>{`Sorry, something went wrong. We're looking into it.`}</p>\n    <div style={{ fontFamily: \"monospace\" }}>\n      {error ? error.message : null}\n    </div>\n    <a href=\"/\">Go to the homepage</a>\n  </div>\n);\n","import React from \"react\";\nimport { Error } from \"components\";\n\nexport class ErrorBoundary extends React.Component<any, any> {\n  state = {\n    error: null,\n  };\n\n  componentDidCatch(error: any, info: any) {\n    this.setState({ error });\n  }\n\n  render() {\n    if (this.state.error) {\n      return <Error error={this.state.error} />;\n    }\n\n    return this.props.children;\n  }\n}\n","import styled from 'styled-components'\n\nconst HeaderFooterWrapper = styled.div`\n  max-width: 500px;\n  margin: 0 auto;\n  display: grid;\n  grid-template-rows: max-content auto max-content;\n  min-height: 100vh;\n`\nconst Header = styled.div`\n  padding: 2rem 1rem 1rem;\n`\nconst Page = styled.div`\n  padding: 1rem;\n`\nconst Footer = styled.div`\n  padding: 1rem;\n  text-align: center;\n  opacity: .3;\n`\n\nexport {\n  HeaderFooterWrapper,\n  Header,\n  Page,\n  Footer,\n}\n","// color variables\n\nexport const colors = {\n  black: \"hsl(220, 20%, 20%)\",\n  lightGray: \"hsl(220, 20%, 70%)\",\n  blue: \"hsl(220, 80%, 60%)\",\n};\n","import styled, { createGlobalStyle } from \"styled-components\";\nimport { Link } from \"react-router-dom\";\n\nimport { colors } from \"app/styled/theme\";\n\nexport const GlobalStyles = createGlobalStyle`\n  *:before,\n  *:after,\n  * {\n    box-sizing: border-box;\n    font-family: sans-serif;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n  }\n\n  html,\n  body {\n    margin: 0;\n    padding: 0;\n    line-height: 1.4;\n  }\n\n  html,\n  body,\n  #root {\n    min-height: 100vh;\n  }\n\n  p {\n    margin: 0 0 1rem;\n  }\n\n  hr {\n    border: none;\n    height: 1px;\n    background: #eee;\n    margin: 1rem 0;\n  }\n`;\n\nconst FormRow = styled.div`\n  display: block;\n  margin: 0 0 1rem;\n`;\nconst FormLabel = styled.label`\n  display: block;\n  margin: 0 0 0.33rem;\n`;\nconst TextInput = styled.input`\n  padding: 0.5rem;\n  border-radius: 3px;\n  font-size: 16px;\n  border: 1px solid #ddd;\n  margin: 0 0 1rem;\n`;\nconst TextArea = styled.textarea`\n  padding: 0.5rem;\n  border-radius: 3px;\n  font-size: 16px;\n  border: 1px solid #ddd;\n  margin: 0 0 1rem;\n`;\n\nconst InternalLink = styled(Link)`\n  color: ${colors.blue};\n  text-decoration: none;\n\n  &:hover,\n  &:active {\n    text-decoration: underline;\n  }\n`;\nconst HeaderLink = styled(Link)`\n  color: ${colors.black};\n  text-decoration: none;\n  font-size: 1.2rem;\n`;\n\nexport { InternalLink, FormRow, FormLabel, TextInput, TextArea, HeaderLink };\n","// this Layout component wraps every page with the app header on top\n// check out App.js to see how it's used\n\nimport React from \"react\";\n\nimport logIn from \"../../actions/logIn\";\nimport { FirebaseAuth } from \"components\";\nimport { HeaderFooterWrapper, Header, Footer } from \"./styled\";\nimport { HeaderLink } from \"app/styled\";\n\nexport const Layout: React.FC = ({ children }) => (\n  <HeaderFooterWrapper>\n    <Header>\n      <HeaderLink to=\"/\">Messenger</HeaderLink>\n\n      <div style={{ float: \"right\" }}>\n        <HeaderLink to=\"/search\">\n          <span role=\"img\" aria-label=\"search\">\n            🔎\n          </span>\n        </HeaderLink>{\" \"}\n        <FirebaseAuth>\n          {({ isLoading, error, auth }) => {\n            if (isLoading) {\n              return \"...\";\n            }\n            if (error) {\n              return \"⚠️ login error\";\n            }\n            if (auth) {\n              return (\n                <HeaderLink to={`/account`}>\n                  <span role=\"img\" aria-label=\"account\">\n                    👤\n                  </span>\n                </HeaderLink>\n              );\n            } else {\n              return <button onClick={logIn}>log in</button>;\n            }\n          }}\n        </FirebaseAuth>\n      </div>\n    </Header>\n\n    {children}\n\n    <Footer>© {new Date().getFullYear()}</Footer>\n  </HeaderFooterWrapper>\n);\n","import Firebase from \"firebase/app\";\nimport slugify from \"slugify\";\n\nimport { IRoom } from \"./IRoom\";\n\nconst RoomsCollection = () => Firebase.firestore().collection(\"rooms\");\n\nconst get = async () =>\n  RoomsCollection()\n    .get()\n    .then((snapshot) => {\n      return snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n    })\n    .catch((error) => {\n      console.error(\"Error adding document: \", error);\n      return [];\n    });\n\nconst add = ({ name }: Pick<IRoom, \"name\">) =>\n  RoomsCollection()\n    .add({\n      name,\n      slug: slugify(name, { lower: true }),\n      createdAt: Firebase.firestore.Timestamp.now(),\n      createdBy: Firebase.auth().currentUser?.uid || null,\n    })\n    .then((docRef) => {\n      console.log(\"Document written with ID: \", docRef.id);\n    })\n    .catch((error) => {\n      console.error(\"Error adding document: \", error);\n    });\n\nconst remove = ({ id }: IRoom) =>\n  RoomsCollection()\n    .doc(id)\n    .delete()\n    .catch((error) => {\n      alert(`Whoops, couldn't delete the post: ${error.message}`);\n    });\n\nexport const RoomsService = { get, add, remove };\n","import React, { useEffect, useState } from \"react\";\nimport { Route } from \"react-router-dom\";\n\nimport { RoomsService } from \"services/rooms\";\nimport { IRoom } from \"services/rooms/IRoom\";\n\nexport const Profile: React.FC<any> = ({ auth }) => {\n  const [newRoomName, setNewRoomName] = useState<string>(\"\");\n  const [rooms, setRooms] = useState<IRoom[]>([]);\n\n  useEffect(() => {\n    // @ts-ignore\n    RoomsService.get().then(setRooms);\n  }, []);\n\n  return (\n    <Route\n      render={({ history }) => (\n        <div>\n          <img\n            src={auth.photoURL}\n            alt={auth.displayName}\n            width=\"100\"\n            height=\"100\"\n          />\n          <p>\n            <strong>{auth.displayName}</strong>\n          </p>\n          <p>{auth.email}</p>\n          +++\n          {rooms.map((room) => (\n            <section>\n              <p>{room.name}</p>\n              <button onClick={() => RoomsService.remove(room)}>\n                DELETE {room.name} ROOM\n              </button>\n            </section>\n          ))}\n          <input\n            onChange={(e) => setNewRoomName(e.target.value)}\n            value={newRoomName}\n          />\n          <button onClick={() => RoomsService.add({ name: \"Test\" })}>\n            CREATE ROOM\n          </button>\n          {/* <button onClick={() => logOut.then(() => history.push(`/`))}>\n          log out\n        </button> */}\n        </div>\n      )}\n    />\n  );\n};\n","import React, { useEffect } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\n\nexport const ScrollToTop: React.FC<RouteComponentProps> = ({ history }) => {\n  useEffect(() => {\n    const unlisten = history.listen(() => {\n      window.scrollTo(0, 0);\n    });\n    return () => {\n      unlisten();\n    };\n  }, [history]);\n\n  return null;\n};\n\nexport default withRouter(ScrollToTop);\n","import React from \"react\";\n\nimport logIn from \"../../actions/logIn\";\nimport { Profile, Error, FirebaseAuth } from \"components\";\n\nexport const Home = () => (\n  <>\n    <FirebaseAuth>\n      {({ isLoading, error, auth }) => {\n        if (isLoading) {\n          return <p>loading...</p>;\n        }\n\n        if (error) {\n          return <Error error={error} />;\n        }\n\n        if (!auth) {\n          return (\n            <div>\n              <p>Log in to see your account</p>\n              <button onClick={logIn}>Log in</button>\n            </div>\n          );\n        }\n\n        return (\n          <div>\n            <Profile auth={auth} />\n            <hr />\n          </div>\n        );\n      }}\n    </FirebaseAuth>\n  </>\n);\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { Home } from \"pages\";\nimport { Error } from \"components\";\n\nexport const Router = () => (\n  <Switch>\n    <Route path=\"/\" component={Home} />\n    {/* <Route path=\"/:slug\" component={Post} /> */}\n    <Route component={Error} />\n  </Switch>\n);\n","import Firebase from \"firebase/app\";\nimport { FirestoreProvider } from \"react-firestore\";\nimport React from \"react\";\n\nimport { Router } from \"app/router\";\nimport { GlobalStyles } from \"app/styled\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { ErrorBoundary, Layout, ScrollToTop } from \"components\";\n\nconst App = () => (\n  <ErrorBoundary>\n    <FirestoreProvider firebase={Firebase}>\n      <BrowserRouter>\n        <Layout>\n          <ScrollToTop />\n          <GlobalStyles />\n          <Router />\n        </Layout>\n      </BrowserRouter>\n    </FirestoreProvider>\n  </ErrorBoundary>\n);\n\nexport default App;\n","import \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport Firebase from \"firebase/app\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"app\";\n\nFirebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}